<h1 class="text-2xl font-bold mb-6">Review Ad</h1>
<%- include('../partials/admin-nav') %>

<div class="bg-slate-900 p-6 rounded border border-slate-800 space-y-4">

  <h2 class="text-xl font-semibold"><%= ad.title %></h2>

  <p class="text-slate-400">
    Posted by <span class="text-indigo-400"><%= ad.username %></span>
  </p>

  <p class="whitespace-pre-line text-slate-200"><%= ad.body %></p>

  <% if (ad.category) { %>
    <p class="text-slate-400">Category: <%= ad.category %></p>
  <% } %>

  <% if (ad.location) { %>
    <p class="text-slate-400">Location: <%= ad.location %></p>
  <% } %>

  <p class="text-slate-500 text-sm">
    Status: <span class="text-indigo-300"><%= ad.status %></span>
  </p>

  <% if (ad.admin_notes) { %>
    <p class="text-yellow-400 text-sm">
      Admin notes: <%= ad.admin_notes %>
    </p>
  <% } %>

  <% if (ad.flagged_reason) { %>
    <p class="text-red-400 text-sm">
      Flag reason: <%= ad.flagged_reason %>
    </p>
  <% } %>

  <div class="border-t border-slate-700 pt-4 flex gap-2">

    <% if (ad.status === 'in-review') { %>
      <!-- APPROVE -->
      <form action="/admin/ads/<%= ad.id %>/approve" method="POST">
        <button class="bg-green-600 hover:bg-green-500 px-3 py-1 rounded">
          Approve
        </button>
      </form>

      <!-- REJECT -->
      <form action="/admin/ads/<%= ad.id %>/reject" method="POST">
        <input type="hidden" name="notes" value="Rejected by admin">
        <button class="bg-red-600 hover:bg-red-500 px-3 py-1 rounded">
          Reject
        </button>
      </form>

      <!-- REQUEST EDITS -->
      <form action="/admin/ads/<%= ad.id %>/request-edits" method="POST">
        <input type="hidden" name="notes" value="Please edit and resubmit">
        <button class="bg-yellow-600 hover:bg-yellow-500 px-3 py-1 rounded">
          Request Edits
        </button>
      </form>
    <% } %>

    <% if (ad.status === 'approved') { %>
      <!-- PUBLISH -->
      <form action="/admin/ads/<%= ad.id %>/publish" method="POST">
        <button class="bg-blue-600 hover:bg-blue-500 px-3 py-1 rounded">
          Publish
        </button>
      </form>
    <% } %>

    <% if (ad.status === 'published') { %>
      <!-- ARCHIVE -->
      <form action="/admin/ads/<%= ad.id %>/archive" method="POST">
        <button class="bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded">
          Archive
        </button>
      </form>
    <% } %>

    <% if (ad.status === 'flagged') { %>
      <!-- APPROVE -->
      <form action="/admin/ads/<%= ad.id %>/approve" method="POST">
        <button class="bg-green-600 hover:bg-green-500 px-3 py-1 rounded">
          Approve
        </button>
      </form>

      <!-- REJECT -->
      <form action="/admin/ads/<%= ad.id %>/reject" method="POST">
        <input type="hidden" name="notes" value="Rejected after flag review">
        <button class="bg-red-600 hover:bg-red-500 px-3 py-1 rounded">
          Reject
        </button>
      </form>

      <!-- ARCHIVE -->
      <form action="/admin/ads/<%= ad.id %>/archive" method="POST">
        <button class="bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded">
          Archive
        </button>
      </form>
    <% } %>

  </div>
</div>

